<h1><%= @discussion.title %></h1>
<p><%= @discussion.body %></p>
<p>Posted by: <%= @discussion.user.full_name %> | <%= time_ago_in_words(@discussion.created_at) %> ago</p>

<% if @discussion.user == current_user %>
  <%= link_to 'Edit', edit_discussion_path(@discussion), class: 'btn btn-secondary' %>
  <%= link_to 'Delete', discussion_path(@discussion), method: :delete, data: { confirm: 'Are you sure?' }, class: 'btn btn-danger' %>
<% end %>

<hr>

<h2>Comments</h2>

<% @comments.each do |comment| %>
  <div class="comment">
    <p><%= comment.body %></p>
    <p>Posted by: <%= comment.user.full_name %> | <%= time_ago_in_words(comment.created_at) %> ago</p>

    <% if comment.user == current_user %>
      <%= link_to 'Edit', edit_discussion_comment_path(@discussion, comment), class: 'btn btn-secondary' %>
      <%= link_to 'Delete', discussion_comment_path(@discussion, comment), method: :delete, data: { confirm: 'Are you sure?' }, class: 'btn btn-danger' %>
    <% end %>
  </div>
  <hr>
<% end %>

<h3>Post a Comment</h3>

<%= form_with(model: [@discussion, @comment], local: true) do |form| %>
  <div class="form-group">
    <%= form.text_area :body, rows: 3, class: 'form-control' %>
  </div>

  <div class="form-group">
    <%= form.submit 'Post Comment', class: 'btn btn-primary' %>
  </div>
<% end %>
